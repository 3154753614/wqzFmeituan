"use strict";(self["webpackChunkfmeituan"]=self["webpackChunkfmeituan"]||[]).push([[470],{5965:function(t,e,n){function l(t){return{all:t=t||new Map,on:function(e,n){var l=t.get(e);l?l.push(n):t.set(e,[n])},off:function(e,n){var l=t.get(e);l&&(n?l.splice(l.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var l=t.get(e);l&&l.slice().map((function(t){t(n)})),(l=t.get("*"))&&l.slice().map((function(t){t(e,n)}))}}}n.d(e,{A:function(){return o}});const c=l();var o=c},4671:function(t,e,n){n.d(e,{A:function(){return v}});var l=n(2360),c=n(9177);const o={class:"header"};function r(t,e,n,r,a,i){const s=(0,l.g2)("van-icon");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(s,{name:"arrow-left",class:"icon",onClick:r.toBack},null,8,["onClick"]),(0,l.Lk)("div",null,(0,c.v_)(n.title),1),n.edit?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"edit",onClick:e[0]||(e[0]=(...t)=>r.editClick&&r.editClick(...t))},(0,c.v_)(r.store.state.edit?"编辑":"完成"),1)):(0,l.Q3)("",!0)])}var a=n(5965),i=n(1890),s=n(9294),u=n(4510),d={props:["title","edit"],setup(){const t=(0,s.Pj)(),e=(0,u.rd)(),n=()=>{e.back()},l=()=>{t.state.cartList.length?(t.commit("EDIT"),a.A.emit("edit")):(0,i.P0)({message:"购物车中没有商品",icon:"like-o"})};return{editClick:l,toBack:n,store:t}}},f=n(9874);const m=(0,f.A)(d,[["render",r],["__scopeId","data-v-75140fff"]]);var v=m},3470:function(t,e,n){n.r(e),n.d(e,{default:function(){return P}});var l=n(2360),c=n(9177);const o=t=>((0,l.Qi)("data-v-5efd831c"),t=t(),(0,l.jt)(),t),r={class:"create_order"},a={class:"content"},i={class:"pay-wrap"},s={class:"price"},u=o((()=>(0,l.Lk)("span",null,"商品金额",-1)));function d(t,e,n,o,d,f){const m=(0,l.g2)("Headers"),v=(0,l.g2)("van-contact-card"),p=(0,l.g2)("van-card"),k=(0,l.g2)("van-button");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(m,{title:"生成订单"}),(0,l.bF)(v,{type:"edit",name:t.currentContact.name,tel:t.currentContact.tel,onClick:o.onEdit},null,8,["name","tel","onClick"]),(0,l.Lk)("div",a,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.store.state.orderList,((t,e)=>((0,l.uX)(),(0,l.CE)("div",{key:e},[(0,l.bF)(p,{num:t.num,price:t.price,title:t.title},null,8,["num","price","title"])])))),128)),(0,l.Lk)("div",i,[(0,l.Lk)("div",s,[u,(0,l.Lk)("span",null,"￥"+(0,c.v_)(t.allPrice),1)]),(0,l.bF)(k,{onClick:o.handleCreateOrder,class:"pay-btn",block:"",color:"#ffc400",type:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)("生成订单")])),_:1},8,["onClick"])])])])}n(381);var f=n(4671),m=n(6408),v=n(9294),p=n(4510),k=n(5130),C=n(105),h=n(6613);let b;const g={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let E=(0,k.X$)({},g);function y(){const t={setup(){const{state:t,toggle:e}=(0,C.T)();return()=>(0,l.bF)(h.A,(0,l.v6)(t,{"onUpdate:show":e}),null)}};({instance:b}=(0,C.b)(t))}function L(t){return k.M?new Promise(((e,n)=>{b||y(),b.open((0,k.X$)({},E,t,{callback:t=>{("confirm"===t?e:n)(t)}}))})):Promise.resolve(void 0)}var w={components:{Headers:f.A},setup(){const t=(0,p.lq)(),e=(0,p.rd)(),n=(0,v.Pj)();let c=(0,m.Kh)({currentContact:{name:"",tel:""},allPrice:0});const o=()=>{let t=0;n.state.orderList.length&&(n.state.orderList.forEach((e=>{t+=e.num*e.price})),c.allPrice=t)},r=()=>{n.state.userAddress.forEach((t=>{t.isDefault&&(c.currentContact.name=t.name,c.currentContact.tel=t.tel)}))};(0,l.sV)((()=>{o(),r()}));const a=()=>{e.push("/address")},i=()=>{L({title:"提示",message:"订单已生成"}).then((()=>{let l=n.state.cartList.filter((e=>!t.query.list.includes(e.id+"")));n.commit("DELETE",l),n.commit("UPDATEORDER"),e.push("/order")}))};return{...(0,m.QW)(c),onEdit:a,handleCreateOrder:i,store:n}}},A=n(9874);const B=(0,A.A)(w,[["render",d],["__scopeId","data-v-5efd831c"]]);var P=B}}]);
//# sourceMappingURL=470.1af200ce.js.map